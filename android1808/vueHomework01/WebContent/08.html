<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="js/jquery-1.4.2.js"></script>
<script type="text/javascript" src="js/vue.js"></script>
</head>
<body>
<button @click="insert">insert</button>
<button @click="deleteTest">delete</button>
<div id="app"></div>
</body>
<script type="text/javascript">
//framework start
function Vue(options){
	//1.从options.el找根元素
	var root=document.getElementById(options.el);
	//2.数据绑定
	//2.1从options.data取数据
	var data=options.data;
	var items=data.items;
	//2.2每隔100ms更新界面
	setInterval(function(){
		root.innerHTML="";
		for(var i=0;i<items.length;i++){
			var item=items[i];
			root.innerHTML=root.innerHTML+item.title+"<br/>"
		}
	},1000);
	//3.事件绑定
	//3.1找到所有的button
	var buttons=document.getElementsByTagName("button");
	//3.2遍历每个button的属性
	for(var i=0;i<buttons.length;i++){
		var attributes=buttons[i].attributes;
		for(var k=0;k<attributes.length;k++){
			var attributeName=attributes[k].name;
			var attributeValue=attributes[k].value;
			//3.3判断属性名是不是@click
			if(attributeName=="@click"){
				//3.4用$.each遍历options
				//options insert:fun,delete:fun
				$.each(options,function(key,value){
					if(key==attributeValue){
						//3.5进行事件绑定
						buttons[i].onclick=value;
					}
				});
			}
		}
	}
}
//framework end
var options={
		el:"app",
		data:{items:[]},
		insert:function(){
			var item={title:"item"};
			//往数组中添加一个数据
			options.data.items.push(item);
		},
		deleteTest:function(){
			//pop:删除数组中的数据
			options.data.items.pop();
		}
}
var vue=new Vue(options);
</script>
</html>