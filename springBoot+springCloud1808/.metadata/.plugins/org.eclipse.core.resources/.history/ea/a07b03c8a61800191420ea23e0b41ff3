package com.jt.sso.service.impl;

import java.util.HashMap;
import java.util.Map;

import org.apache.commons.codec.digest.DigestUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.jt.common.vo.SysResult;
import com.jt.sso.mapper.UserMapper;

@Service
public class UserServiceImpl {

	@Autowired
	private UserMapper userMapper;
	
	//把java对象转换成json串,ObjectMapper
	//private static final ObjectMapper mapper=new ObjectMapper();
	
	//根据type=1:username,2:phone,3:email
	private static final Map<Integer,String> PARAM_TYPE=new HashMap<Integer,String>();
	//初始化
	static {
		PARAM_TYPE.put(1, "username");
		PARAM_TYPE.put(2, "phone");
		PARAM_TYPE.put(3, "email");
	}
	
	public SysResult check(String param,Integer type) {
		int i = userMapper.check(PARAM_TYPE.get(type), param);
		if(i==0) {
			return SysResult.ok("false");	//数据库没有，可用
		}else {
			return SysResult.build(201, "OK", "true");	//数据库值已经存在，不可用
		}
	}
	
}
